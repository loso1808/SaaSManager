SELECT COUNT(*) START_COUNT FROM "z_activity_log";

DELETE "z_activity_log" WHERE "dateLogged" < (SYSDATE - 7) and ("objectName" not in ('sequence', 'seq_feature', 'part') or "logAction" in ('fetching', 'fetching collection'));
DELETE "z_winston" WHERE "dateLogged" < (SYSDATE - 7);
COMMIT;
DELETE "z_DE_bin" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                         
DELETE "z_DE_bin_cell" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                    
DELETE "z_access_control" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                 
DELETE "z_assembly_op_input" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                              
DELETE "z_assembly_op_output" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                             
DELETE "z_assembly_operation" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                             
DELETE "z_assembly_run" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                   
DELETE "z_attached_design_ruleset" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                        
DELETE "z_attached_tag" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                   
DELETE "z_custom_field" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                   
DELETE "z_custom_field_value" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                             
DELETE "z_custom_j5parameters" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                            
DELETE "z_custom_setting" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                 
DELETE "z_dd_part" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                        
DELETE "z_design_rule" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                    
DELETE "z_design_rule_tag" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                
DELETE "z_design_ruleset" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                 
DELETE "z_devicedesign" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                   
DELETE "z_eugene_rule" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                    
DELETE "z_group" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                          
DELETE "z_group_user" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                     
DELETE "z_j5run" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                          
DELETE "z_j5run_construct" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                
DELETE "z_lock" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                           
DELETE "z_master" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                         
--DELETE "z_part" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                           
DELETE "z_part_tag" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                       
DELETE "z_plate" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                          
DELETE "z_plate_set" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                      
DELETE "z_plate_well" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                     
DELETE "z_preset" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                         
DELETE "z_project" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                        
DELETE "z_protein" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                        
DELETE "z_protein_feature" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                
DELETE "z_protocol" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                       
DELETE "z_role" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                           
DELETE "z_seq_blacklist" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                  
--DELETE "z_seq_feature" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                    
--DELETE "z_sequence" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                       
DELETE "z_sequence_j5run" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                 
DELETE "z_strain" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                         
DELETE "z_strain_plasmid" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                 
DELETE "z_tag" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                            
DELETE "z_tag_access" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                     
DELETE "z_user" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);                                                                                                                           
DELETE "z_user_role" WHERE "logSessionId" not in (SELECT "logSessionId" from "z_activity_log" where "logSessionId" is not null);           
COMMIT;

SELECT COUNT(*) END_COUNT FROM "z_activity_log";
